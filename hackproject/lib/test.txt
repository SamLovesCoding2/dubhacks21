import 'package:flutter/material.dart';
import 'package:polymath/layouts/home/learning_section/brain_power_carnival.dart';
import 'package:polymath/layouts/home/learning_section/coming_soon.dart';
import 'package:polymath/layouts/home/learning_section/live_class.dart';
import 'package:polymath/layouts/home/subscription_page.dart';
import 'package:polymath/widgets/journey.dart';
import 'learning_section/listening_section_page.dart';
import 'learning_section/reading_section_page.dart';

class Home extends StatefulWidget {
  const Home({Key? key}) : super(key: key);

  @override
  _HomeState createState() => _HomeState();
}

class _HomeState extends State<Home> {
  /* takes in a Size, and returns the subscription header
  for this page */
  Widget subscription_header(Size _size) {
    return Container(
      height: _size.height / 3,
      width: _size.width,
      color: Colors.purple,
      child: Column(
        children: [
          Container(
            margin: EdgeInsets.only(top: _size.height / 30),
            height: _size.height / 9.5,
            child: FittedBox(
              child: Text(
                  "Join our early access for \n 20% discount \n subscription ",
                  style: const TextStyle(
                      color: const Color(0xffffffff),
                      fontWeight: FontWeight.w700,
                      fontFamily: "HelveticaNeue",
                      fontStyle: FontStyle.normal),
                  textAlign: TextAlign.center),
            ),
          ),
          TextButton(
            onPressed: () {
              Navigator.push(
                context,
                MaterialPageRoute(
                  builder: (context) => SubscriptionPage(),
                ),
              );
            },
            child: Container(
              alignment: Alignment.center,
              width: 0.3 * _size.width,
              height: 0.06 * _size.height,
              margin: EdgeInsets.only(
                  top: 0.005 * _size.height, bottom: 0.035 * _size.height),
              decoration: BoxDecoration(
                borderRadius:
                    BorderRadius.all(Radius.circular(0.024 * _size.width)),
                gradient: LinearGradient(
                  begin: Alignment(0.5, 0),
                  end: Alignment(0.5, 1),
                  colors: [const Color(0xff00fff3), const Color(0xffdd3da6)],
                ),
              ),
              child: // Check Subscription
                  FittedBox(
                child: Text("Check Subscription",
                    style: const TextStyle(
                        color: const Color(0xffffffff),
                        fontWeight: FontWeight.w700,
                        fontFamily: "HelveticaNeue",
                        fontStyle: FontStyle.normal),
                    textAlign: TextAlign.center),
              ),
            ),
          ),
        ],
      ),
    );
  }

/*this function returns the Widget for selectJourney mother Widget */
  Widget selectJourney() {
    return Container(
      height: 240,
      child: ListView(
        scrollDirection: Axis.horizontal,
        children: [
          speakingJourney(),
          listeningJourney(),
          readingJourney(),
          writingJourney()
        ],
      ),
    );
  }

  // returns the speaking journey widget
  Widget speakingJourney() {
    return new Journey(
        title: "English Speaking",
        description: "AI-based speaking accuracy feature",
        context: this.context,
        nav_page: ComingSoon());
  }

  // returns the listening journey widget
  Widget listeningJourney() {
    return new Journey(
      title: "English Listening",
      description: "Practice your listening skills can be really easy",
      context: this.context,
      nav_page: ListeningSection(),
    );
  }

  // returns the reading journey widget
  Widget readingJourney() {
    return new Journey(
      title: "English Reading",
      description: "Get badges while reading and you can learn new words",
      context: this.context,
      nav_page: ReadingSection(),
    );
  }

  // returns the writing journey widget
  Widget writingJourney() {
    return new Journey(
      title: "English Writing",
      description: "Placeholder for the writing portion",
      context: this.context,
      nav_page: ComingSoon(),
    );
  }

  // returns the brain power carnival Widget
  Widget brainPowerCarnival() {
    return new BrainPowerCarnival();
  }

  // returns the liveClass widget
  Widget liveClass() {
    return Container(
      width: 360,
      height: 280,
      child: ListView(
        scrollDirection: Axis.vertical,
        children: [new LiveClass()],
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    Size _size = MediaQuery.of(context).size;
    return ListView(
      children: [
        Stack(
          children: [
            // header
            subscription_header(_size),
            // overlay
            Container(
              margin: EdgeInsets.only(top: _size.height / 4.5),
              decoration: BoxDecoration(
                borderRadius: BorderRadius.all(Radius.circular(30)),
                boxShadow: [
                  BoxShadow(
                      color: const Color(0x4d00ebff),
                      offset: Offset(0, -10),
                      blurRadius: 20,
                      spreadRadius: 0)
                ],
                gradient: LinearGradient(
                  begin: Alignment(0.02874266542494297, 0.016401151195168488),
                  end: Alignment(1, 1),
                  colors: [
                    const Color(0xff080024),
                    const Color(0xff000000),
                    const Color(0xff080024)
                  ],
                ),
              ),
              child: Container(
                alignment: Alignment.center,
                margin: EdgeInsets.all(30),
                child: Column(
                  children: [
                    // Select Your Journey
                    Container(
                      alignment: Alignment.topLeft,
                      margin: EdgeInsets.only(bottom: 15),
                      child: Text("Select Your Journey",
                          style: const TextStyle(
                              color: const Color(0xffffffff),
                              fontWeight: FontWeight.w700,
                              fontFamily: "HelveticaNeue",
                              fontStyle: FontStyle.normal,
                              fontSize: 20.0),
                          textAlign: TextAlign.left),
                    ),
                    selectJourney(),
                    Container(
                      alignment: Alignment.topLeft,
                      margin: EdgeInsets.only(bottom: 15, top: 15),
                      child: // Brain Power Carnival
                          Text("Brain Power Carnival",
                              style: const TextStyle(
                                  color: const Color(0xffffffff),
                                  fontWeight: FontWeight.w700,
                                  fontFamily: "HelveticaNeue",
                                  fontStyle: FontStyle.normal,
                                  fontSize: 20.0),
                              textAlign: TextAlign.left),
                    ),
                    // brain power carnival
                    brainPowerCarnival(),
                    Container(
                      alignment: Alignment.topLeft,
                      margin: EdgeInsets.only(bottom: 15, top: 15),
                      child: // Brain Power Carnival
                          // Live Class
                          Text("Live Class",
                              style: const TextStyle(
                                  color: const Color(0xffffffff),
                                  fontWeight: FontWeight.w700,
                                  fontFamily: "HelveticaNeue",
                                  fontStyle: FontStyle.normal,
                                  fontSize: 20.0),
                              textAlign: TextAlign.left),
                    ),
                    // live class
                    liveClass()
                  ],
                ),
              ),
            ),
          ],
        ),
      ],
    );
  }
}
